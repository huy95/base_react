{"ast":null,"code":"var _jsxFileName = \"/Users/huy/Documents/react-js/hook_js/base_react/src/useEffectHooks.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\n// 1. update DOM\n// 2. call api\n// 3. listen DOM events - scroll - resize\n// 4. cleanup :\n//     - remove listener/ unsubcribe\n// - clear timer\n\n//cac truong hop :\n//1. useEffect(callback) => it dung vì mỗi lần re-render là sẽ render lại\n//2. useEffect(callback, [])  => chỉ gọi callback 1 lần khi component mount\n//3. useEffect(callback, [deps])\n\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tabs = ['posts', 'comments', 'albums'];\nfunction UseEffectHook() {\n  _s();\n  const [isShowContent, setContent] = useState(false);\n  const [post, setPosts] = useState([]);\n\n  // useEffect(() => {\n  //     fetch('https://jsonplaceholder.typicode.com/posts').then(res => res.json()).then(\n  //         item => {\n  //             // setPosts(item)\n  //         }\n  //     )\n  // }, [])\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setContent(!isShowContent),\n      children: \"Togger\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this), isShowContent && /*#__PURE__*/_jsxDEV(ContentSelectImage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this);\n}\n_s(UseEffectHook, \"CzCfcIjAhceTZUFNCkDxMZp43JY=\");\n_c = UseEffectHook;\nexport default UseEffectHook;\nfunction Content() {\n  _s2();\n  const [title, setTitle] = useState(\"\");\n  const [post, setPosts] = useState([]);\n  const [type, setType] = useState(\"posts\");\n  useEffect(() => {\n    document.title = title;\n  });\n  console.log(type);\n  useEffect(() => {\n    fetch('https://jsonplaceholder.typicode.com/' + type).then(res => res.json()).then(item => {\n      setPosts(item);\n    });\n  }, [type]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      value: title,\n      onChange: e => setTitle(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), tabs.map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setType(item),\n      style: item === type ? {\n        color: '#fff',\n        backgroundColor: '#333'\n      } : {},\n      children: item\n    }, item, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: post.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: item.title || item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 34\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 13\n  }, this);\n}\n_s2(Content, \"BAGmBbe0+tJo1XtBhoqPanQTTp4=\");\n_c2 = Content;\nfunction ContentWidth() {\n  _s3();\n  const [width, setWidth] = useState(window.innerWidth);\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth);\n    };\n    window.addEventListener('resize', handleResize);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: width\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 13\n  }, this);\n}\n\n// trong trường hợp dùng - setInterval, setTimeout, gọi api => phải luôn nhớ clear đi để tranh dò bộ nhớ\n_s3(ContentWidth, \"G7kj69GIMHEKUWgFcp/hGy+ukY8=\");\n_c3 = ContentWidth;\nfunction ContentSetTime() {\n  _s4();\n  const [count, setCount] = useState(180);\n  useEffect(() => {\n    const timerId = setInterval(() => {\n      setCount(pre => pre - 1);\n      console.log('dasd');\n    }, 1000);\n    // hàm dọn dẹp khi unmount\n    return () => clearInterval(timerId);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: count\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 13\n  }, this);\n}\n// nếu không xóa ảnh thì ảnh sẽ vẫn còn trong bộ nhớ gây tràn bộ nhớ local\n_s4(ContentSetTime, \"kdA09W09Rmc4H5vUyX14S8s7i30=\");\n_c4 = ContentSetTime;\nfunction ContentSelectImage() {\n  _s5();\n  const [avatar, setAvatar] = useState();\n  useEffect(() => {\n    return () => {\n      avatar && URL.revokeObjectURL(avatar.preview);\n    };\n  }, [avatar]);\n  const handlerPreviewAvatar = e => {\n    const file = e.target.files[0];\n    console.log(file);\n    file.preview = URL.createObjectURL(file);\n    setAvatar(file);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handlerPreviewAvatar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this), avatar && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: avatar.preview,\n      alt: \"\",\n      width: \"80%\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 13\n  }, this);\n}\n_s5(ContentSelectImage, \"udMaMIi0DYjRYuUM/6bK/mQm8lk=\");\n_c5 = ContentSelectImage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"UseEffectHook\");\n$RefreshReg$(_c2, \"Content\");\n$RefreshReg$(_c3, \"ContentWidth\");\n$RefreshReg$(_c4, \"ContentSetTime\");\n$RefreshReg$(_c5, \"ContentSelectImage\");","map":{"version":3,"names":["useEffect","useState","jsxDEV","_jsxDEV","tabs","UseEffectHook","_s","isShowContent","setContent","post","setPosts","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ContentSelectImage","_c","Content","_s2","title","setTitle","type","setType","document","console","log","fetch","then","res","json","item","value","onChange","e","target","map","style","color","backgroundColor","name","_c2","ContentWidth","_s3","width","setWidth","window","innerWidth","handleResize","addEventListener","_c3","ContentSetTime","_s4","count","setCount","timerId","setInterval","pre","clearInterval","_c4","_s5","avatar","setAvatar","URL","revokeObjectURL","preview","handlerPreviewAvatar","file","files","createObjectURL","src","alt","_c5","$RefreshReg$"],"sources":["/Users/huy/Documents/react-js/hook_js/base_react/src/useEffectHooks.js"],"sourcesContent":["// 1. update DOM\n// 2. call api\n// 3. listen DOM events - scroll - resize\n// 4. cleanup :\n//     - remove listener/ unsubcribe\n// - clear timer\n\n//cac truong hop :\n//1. useEffect(callback) => it dung vì mỗi lần re-render là sẽ render lại\n//2. useEffect(callback, [])  => chỉ gọi callback 1 lần khi component mount\n//3. useEffect(callback, [deps])\n\nimport {useEffect, useState} from \"react\";\n\nconst tabs = ['posts', 'comments', 'albums']\n\nfunction UseEffectHook() {\n    const [isShowContent, setContent] = useState(false);\n    const [post, setPosts] = useState([]);\n\n    // useEffect(() => {\n    //     fetch('https://jsonplaceholder.typicode.com/posts').then(res => res.json()).then(\n    //         item => {\n    //             // setPosts(item)\n    //         }\n    //     )\n    // }, [])\n\n    return (\n        <div>\n            <button onClick={() => setContent(!isShowContent)}>Togger</button>\n            {isShowContent && <ContentSelectImage/>}\n            {/*<ul>*/}\n            {/*    {post.map((item) => (<li>*/}\n            {/*        {item.title}*/}\n            {/*    </li>))}*/}\n            {/*</ul>*/}\n        </div>\n    )\n}\n\nexport default UseEffectHook\n\n\nfunction Content() {\n    const [title, setTitle] = useState(\"\");\n    const [post, setPosts] = useState([]);\n    const [type, setType] = useState(\"posts\");\n    useEffect(() => {\n        document.title = title;\n    })\n    console.log(type)\n    useEffect(() => {\n        fetch('https://jsonplaceholder.typicode.com/' + type).then(res => res.json()).then(\n            item => {\n                setPosts(item)\n            }\n        )\n    }, [type])\n    return (<div>\n        <input value={title}\n               onChange={e => setTitle(e.target.value)}\n        />\n        {\n            tabs.map(item => (\n                <button key={item}\n                        onClick={() => setType(item)}\n                        style={item === type ? {color: '#fff', backgroundColor: '#333'} : {}}>\n                    {item}\n                </button>\n            ))\n        }\n        <ul>\n            {post.map((item) => (<li>\n                {item.title || item.name}\n            </li>))}\n        </ul>\n    </div>)\n}\n\nfunction ContentWidth() {\n    const [width, setWidth] = useState(window.innerWidth);\n    useEffect(() => {\n        const handleResize = () => {\n            setWidth(window.innerWidth)\n        }\n        window.addEventListener('resize', handleResize)\n    }, [])\n\n    return (<div>\n        <h1>{width}</h1>\n    </div>)\n}\n\n// trong trường hợp dùng - setInterval, setTimeout, gọi api => phải luôn nhớ clear đi để tranh dò bộ nhớ\nfunction ContentSetTime() {\n\n    const [count, setCount] = useState(180);\n    useEffect(() => {\n        const timerId = setInterval(() => {\n            setCount(pre => pre - 1);\n            console.log('dasd')\n        }, 1000);\n        // hàm dọn dẹp khi unmount\n        return () => clearInterval(timerId)\n    }, [])\n\n    return (<div>\n        <h1>{count}</h1>\n    </div>)\n}\n// nếu không xóa ảnh thì ảnh sẽ vẫn còn trong bộ nhớ gây tràn bộ nhớ local\nfunction ContentSelectImage() {\n    const [avatar, setAvatar] = useState();\n\n    useEffect(() => {\n        return () => {\n            avatar && URL.revokeObjectURL( avatar.preview)\n        }\n    }, [avatar])\n\n    const  handlerPreviewAvatar = (e) => {\n        const file = e.target.files[0]\n        console.log(file);\n        file.preview = URL.createObjectURL(file)\n        setAvatar(file)\n    }\n\n    return (<div>\n        <input type=\"file\" onChange={handlerPreviewAvatar}/>\n        {avatar && (<img src={avatar.preview} alt=\"\" width=\"80%\" />)}\n    </div>)\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}